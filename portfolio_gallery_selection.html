<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <title>DevonMedicalArt</title>
    <meta name="description"content="Here goes description"/>
    <meta name="author"content="author name"/>
    <link rel="shortcut icon"href="images/favicon.ico"type="image/x-icon"/>
    <meta name="viewport"content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link href='https://fonts.googleapis.com/css?family=Enriqueta:400,700|Open+Sans:400italic,700italic,400,600,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"crossorigin="anonymous">
    <link rel="stylesheet"href="css/style.css"/>
    <script src="js/jquery-1.10.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"crossorigin="anonymous"></script>
    <!--[if IE 8]>
        <link rel="stylesheet"href="css/ie8.css"/>
        <![endif]-->
</head>

<body>
    <script>
        $(function() {
            $("#header-template").parent().load("header.html");
            $("#header-template").remove();
            $("#footer-template").load("footer.html");
        });
    </script>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div id="header-template"></div>
    </nav>
    <div  >
        <img class='tornPaper' src="./images/tornPaper.png"alt="">
      </div>

      <!-- <svg version="1.1"id="Layer_1"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"x="0px"y="0px"
      viewBox="0 0 86.6 40.15"style="enable-background:new 0 0 86.6 40.15;"xml:space="preserve">
  <style type="text/css">
      .st0{fill:#ff00ff;}
  </style>
  <polygon class="st0"points="43.3,40.15 86.6,0 0,0 "/>
  </svg> -->


  <style>

    select#category, .mediaSelection {
        height: 30px;
        background: #3ab4b0;
        text-align: center;
    }



    /* The container must be positioned relative: */
.styleSelect {
  position: relative;
  font-family: Arial;
}

.styleSelect select {
  display: none;
}

.select-selected {
  background-color: #239490;
  position:relative;
}

.select-selected:after {
  position: absolute;
  content: "";
  top: 21px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
}

.select-selected.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 13px;
}

.select-items div,.select-selected {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
}

.select-items {
  position: absolute;
  background-color: #239490;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
}

.select-hide {
  display: none;
}

.select-items div:hover, .same-as-selected {
  background-color: rgba(0, 0, 0, 0.1);
}
  </style>

      <div class="mediaSelectionArea">
        <div class="styleSelect">
            <label for="category"></labels>
            <select name="category"id="category">

                <option value="Select a category">Select a category</option>
                <option value="3D modeling">3D modeling</option>
                <option value="Anatomical illustration">Anatomical illustration</option>
                <option value="Animation">Animation</option>
                <option value="Patient education">Patient education</option>
                <option value="Pharmaceutical and biomedical research">Pharmaceutical and biomedical research</option>
                <option value="Surgical illustration">Surgical illustration</option>
                <!-- <option value="View all">View all</option> -->
            </select>
        </div>
      </div>
    <script>
        let itemArr = [],
         arr_3D_modeling = [],
          arr_Anatomical_illustration = [],
           arr_Animation = [],
            arr_Patient_education = [],
             arr_Pharmaceutical_and_biomedical_research = [],
              arr_Surgical_illustration = [],
               arr_allItems = []

              // 0: "pageTitle"
              // 1: "thumbnail"
              // 2: "description"
              // 3: "video1Title"
              // 4: "video1Thumb"
              // 5: "video1Url"
              // 6: "video2Title"
              // 7: "video2Thumb"
              // 8: "video2Url"
              // 9: "video3Title"
              // 10: "video3Thumb"
              // 11: "video3Url"
              // 12: "video4Title"
              // 13: "video4Thumb"
              // 14: "video4Url"
              // 15: "video5Title"
              // 16: "video5Thumb"
              // 17: "video5Url"
              // 18: "video6Title"
              // 19: "Video6Thumb"
              // 20: "video6Url"
              // 21: "video7Title"
              // 22: "Video7Thumb"
              // 23: "video7Url"
              // 24: "video8Title"
              // 25: "Video8Thumb"
              // 26: "video8Url"
              // 27: "video9Title"
              // 28: "Video9Thumb"
              // 29: "video9Url"
              // 30: "image1url"
              // 31: "image1AltTag"
              // 32: "image1type"
              // 33: "image2url"
              // 34: "image2AltTag"
              // 35: "image2type"
              // 36: "image3url"
              // 37: "image3AltTag"
              // 38: "image3type"
              // 39: "image4url"
              // 40: "image4AltTag"
              // 41: "image4type"
              // 42: "image5url"
              // 43: "image5AltTag"
              // 44: "image5type"
              // 45: "image6url"
              // 46: "image6AltTag"
              // 47: "image6type"
              // 48: "image7url"
              // 49: "image7AltTag"
              // 50: "image7type"
              // 51: "image8url"
              // 52: "image8AltTag"
              // 53: "image8type"
              // 54: "image9url"
              // 55: "image9AltTag"
              // 56: "image9type"
              // 57: "image10url"
              // 58: "image10AltTag"
              // 59: "image10type"


        let  isImageEntry = (data, i)=>{
            if (data.Portfolio[i][3] !== "video"){
                // console.log("Image: ", i,  data.Portfolio[i][0]);
                 $(".row").append(
                        `<div class='span4 design'>
                                <div class='portfolio_item'>
                                    <div class='item_hover'>
                                        <div class='item_title'>${data.Portfolio[i][0]}</div>
                                    </div>
                                    <div class='item_image'>
                                        <img src="${data.Portfolio[i][1]}"onclick="location.href='portfolio_${i}.html'; localStorage.setItem('pageId', indexOf(itemArr)+1); window.location.hash = '1'; "alt="portofolio ${1}"loading="lazy"/>
                                   </div>
                                </div>
                                    <a href="portfolio_${i}.html"class="button_color">view</a>

                          </div>`
                    )
                }
        }

        let  isVideoEntry = (data, i)=>{
            if (data.Portfolio[i][3] == "video"){
                // console.log("VIDEO: ", data.Portfolio[i][0]);
            $(".row").append(
            `<div class='span4 design'>
                                <div class='portfolio_item'>
                                    <div class='item_hover'>
                                        <div class='item_title'>${data.Portfolio[i][0]}</div>
                                    </div>
                                    <div class='item_image'>
                                        <img src="${data.Portfolio[i][1]}"onclick="location.href='portfolio_${i}.html'; localStorage.setItem('pageId', indexOf(itemArr)+1); window.location.hash = '1'; "alt="portofolio ${1}"loading="lazy"/>
                                   </div>
                                </div>
                                    <a href="portfolio_${i}.html"class="button_color">view</a>
                          </div>`
               )
            }
        }

        fetch('./spreadsheet/portfolioDataSheets_v3.json')
        .then(res=> res.json())
        .then(data=>{
            data.Portfolio.forEach((item)=> {
                itemArr.push(item)
            })
            // console.log( sessionStorage.getItem( 'selection'))
            for (let i = 2; i < data.Portfolio.length; i++){
             switch(data.Portfolio[i][3]){
              case "3D modeling":
                arr_3D_modeling.push(data.Portfolio[i]);
                break;
              case "Anatomical illustration":
                arr_Anatomical_illustration.push(data.Portfolio[i])
                break;
              case "Animation":
                arr_Animation.push(data.Portfolio[i])
              break;
              case "Patient education":
                arr_Patient_education.push(data.Portfolio[i])
                break;
              case "Pharmaceutical and biomedical research":
                arr_Pharmaceutical_and_biomedical_research.push(data.Portfolio[i])
              break;
              case "Surgical illustration":
                arr_Surgical_illustration.push(data.Portfolio[i])
                break;
              default:
                console.log('select a category')
             }
                if(sessionStorage.getItem('selection') !== 'videos' && sessionStorage.getItem('selection') !== 'images'){
                    isVideoEntry(data, i);
                    isImageEntry(data, i);
                }else if(  sessionStorage.getItem('selection') == 'videos'){
                    isVideoEntry(data, i);
                }else if(  sessionStorage.getItem('selection') == 'images'){
                    isImageEntry(data, i);
                }
            }
            arr_allItems = itemArr;
        })
        .catch(err =>{ console.log(err)}
        )
        console.log(arr_allItems)
    </script>


    <div class="boxed_fluid">
        <!-- ================================= START SITE CONTENT -->
        <div class="site_content">
            <div class="content">
                <div class="portfolio">
                    <div class="row"id="displayedPortfolioItems">
                    </div>
                </div>
            </div>
        </div>
        <!-- ================================= END SITE CONTENT -->

        <div id="footer-template"></div>

        <script src="js/modernizr.custom.63321.js"></script>
        <script src="js/jquery-ui.min.js"type="text/javascript"></script>
        <script src="js/placeholder.js"type="text/javascript"></script>
        <script src="js/options.js"type="text/javascript"></script>
        <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-177523319-1">
</script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-177523319-1');
</script>


<script>
  let imageTypeSet = (sessionStorageType)=>{
    updatedSessionStorageType = `arr_${sessionStorageType.replace(/\s/g, '_')}`;
    // updatedSessionStorageType =  'arr_' , sessionStorageType.replace(/\s/g, '_');
    window.sessionStorage.setItem('type', updatedSessionStorageType);

    switch(updatedSessionStorageType){
              case "arr_3D_modeling":
                     updatedSessionStorageType = arr_3D_modeling
                break;
              case "arr_Anatomical_illustration":
                     updatedSessionStorageType = arr_Anatomical_illustration
                break;
              case "arr_Animation":
                    updatedSessionStorageType = arr_Animation
              break;
              case "arr_Patient_education":
                  updatedSessionStorageType = arr_Patient_education
                break;
              case "arr_Pharmaceutical_and_biomedical_research":
                   updatedSessionStorageType =arr_Pharmaceutical_and_biomedical_research
              break;
              case "arr_Surgical_illustration":
                   updatedSessionStorageType = arr_Surgical_illustration
                break;
              case "View all":
                updatedSessionStorageType = itemArr
              default:
                console.log('nothing here')
             }
            for( let i = 0; i < updatedSessionStorageType.length; i++){
                console.log(updatedSessionStorageType[i])
                if (updatedSessionStorageType[i][3] !== "Animation"){

                 $("#displayedPortfolioItems").append(
                        `<div class='span4 design'>
                                <div class='portfolio_item'>
                                    <div class='item_hover'>
                                        <div class='item_title'>${updatedSessionStorageType[i][0]}</div>
                                    </div>
                                    <div class='item_image'>
                                        <img src="${updatedSessionStorageType[i][1]}"onclick="location.href='portfolio_${i}.html'; localStorage.setItem('pageId', indexOf(itemArr)+1); window.location.hash = '1'; "alt="portofolio ${1}"loading="lazy"/>
                                   </div>
                                </div>
                                    <a href="portfolio_${i}.html"class="button_color">view</a>

                          </div>`
                    )
                }
                if (updatedSessionStorageType[i][3] == "Animation"){
                  $("#displayedPortfolioItems").append(
                  `<div class='span4 design'>
                                      <div class='portfolio_item'>
                                          <div class='item_hover'>
                                              <div class='item_title'>${updatedSessionStorageType[i][0]}</div>
                                          </div>
                                          <div class='item_image'>
                                              <img src="${updatedSessionStorageType[i][1]}"onclick="location.href='portfolio_${i}.html'; localStorage.setItem('pageId', indexOf(itemArr)+1); window.location.hash = '1'; "alt="portofolio ${1}"loading="lazy"/>
                                        </div>
                                      </div>
                                          <a href="portfolio_${i}.html"class="button_color">view</a>
                                </div>`
                    )
                  }
            }
  }

    var x, i, j, l, ll, selElmnt, a, b, c;
x = document.getElementsByClassName("styleSelect");
grabDisplayedPortfolioItems = document.getElementById('displayedPortfolioItems');
l = x.length;
for (i = 0; i < l; i++) {
  selElmnt = x[i].getElementsByTagName("select")[0];
  ll = selElmnt.length;
  /* For each element, create a new DIV that will act as the selected item: */
  a = document.createElement("DIV");
  a.setAttribute("class", "select-selected");
  a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
  x[i].appendChild(a);
  /* For each element, create a new DIV that will contain the option list: */
  b = document.createElement("DIV");
  b.setAttribute("class", "select-items select-hide");
  for (j = 1; j < ll; j++) {
    /* For each option in the original select element,
    create a new DIV that will act as an option item: */
    c = document.createElement("DIV");
    c.innerHTML = selElmnt.options[j].innerHTML;
    c.addEventListener("click", function(e) {
        /* When an item is clicked, update the original select box,
        and the selected item: */

        var y, i, k, s, h, sl, yl;
        s = this.parentNode.parentNode.getElementsByTagName("select")[0];
        sl = s.length;
        h = this.parentNode.previousSibling;
        for (i = 0; i < sl; i++) {
          if (s.options[i].innerHTML == this.innerHTML) {
            s.selectedIndex = i;
            h.innerHTML = this.innerHTML;
            y = this.parentNode.getElementsByClassName("same-as-selected");
            yl = y.length;
            for (k = 0; k < yl; k++) {
              y[k].removeAttribute("class");
            }
            this.setAttribute("class", "same-as-selected");
            // set selection to sessionStorage then inject #displayedPortfolioItems with new .
            window.sessionStorage.setItem('type', this.innerHTML);
            grabDisplayedPortfolioItems.innerHTML = "";
            imageTypeSet(this.innerHTML);
            break;
          }
        }
        h.click();
    });
    b.appendChild(c);
  }
  x[i].appendChild(b);
  a.addEventListener("click", function(e) {
    /* When the select box is clicked, close any other select boxes,
    and open/close the current select box: */
    e.stopPropagation();
    closeAllSelect(this);
    this.nextSibling.classList.toggle("select-hide");
    this.classList.toggle("select-arrow-active");
  });
}

function closeAllSelect(elmnt) {
  /* A function that will close all select boxes in the document,
  except the current select box: */
  var x, y, i, xl, yl, arrNo = [];
  x = document.getElementsByClassName("select-items");
  y = document.getElementsByClassName("select-selected");
  xl = x.length;
  yl = y.length;
  for (i = 0; i < yl; i++) {
    if (elmnt == y[i]) {
      arrNo.push(i)
    } else {
      y[i].classList.remove("select-arrow-active");
    }
  }
  for (i = 0; i < xl; i++) {
    if (arrNo.indexOf(i)) {
      x[i].classList.add("select-hide");
    }
  }
}

/* If the user clicks anywhere outside the select box,
then close all select boxes: */
document.addEventListener("click", closeAllSelect);
</script>

</html>